{"mappings":"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","sources":["src/js/load-more.js"],"sourcesContent":["import { fetchByQuery } from './pixabay-api';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport Notiflix from 'notiflix';\nimport 'notiflix/dist/notiflix-3.2.6.min.css';\n\nlet page = 1;\nlet totalHits = 0;\nlet searchQuery = '';\nconst lightbox = new SimpleLightbox('.gallery a');\n\nconst elements = {\n  form: document.querySelector('.search-form'),\n  input: document.querySelector('input[name=\"searchQuery\"]'),\n  gallery: document.querySelector('.gallery'),\n  submitBtn: document.querySelector('button[type=\"submit\"]'),\n  loadMoreBtn: document.querySelector('.js-loadmore'),\n};\n\nelements.form.addEventListener('submit', handleSubmit);\nelements.loadMoreBtn.addEventListener('click', handleLodaMore);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  searchQuery = elements.input.value.trim();\n  page = 1;\n  elements.gallery.innerHTML = '';\n\n  if (elements.loadMoreBtn.classList.contains('load-more')) {\n    elements.loadMoreBtn.classList.replace('load-more', 'load-more-hidden');\n  }\n\n  if (searchQuery === '') {\n    Notiflix.Notify.failure('Input query to start search');\n    return;\n  }\n\n  try {\n    const { totalHits } = await fetchByQuery(searchQuery, page);\n\n    if (totalHits === 0) {\n      Notiflix.Notify.info(\n        'Sorry, nothing was found according your serch query'\n      );\n      elements.loadMoreBtn.classList.add('load-more-hidden');\n    } else {\n      Notiflix.Notify.info(`Hooray! We found ${totalHits} images.`);\n      await fetchAndDisplay();\n      if (totalHits > 40) {\n        elements.loadMoreBtn.classList.replace('load-more-hidden', 'load-more');\n      }\n    }\n  } catch (error) {\n    Notiflix.Notify.failure('Something went wrong. Try reload the page');\n    console.error('There was a problem with the fetch operation:', error);\n  }\n}\n\nasync function handleLodaMore() {\n  page += 1;\n  await fetchAndDisplay();\n  //  плавне прокручування\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nasync function fetchAndDisplay() {\n  try {\n    const { hits, totalHits } = await fetchByQuery(searchQuery, page);\n    const markup = createMarkup(hits);\n    elements.gallery.insertAdjacentHTML('beforeend', markup);\n\n    lightbox.refresh();\n\n    if (page * 40 >= totalHits && totalHits > 0 && page > 1) {\n      elements.loadMoreBtn.classList.replace('load-more', 'load-more-hidden');\n      Notiflix.Notify.info(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  } catch (error) {\n    Notiflix.Notify.failure('Something went wrong. Try reload the page');\n    console.error('There was a problem with the fetch operation:', error);\n  }\n}\n\nconst scrollToTopButton = document.getElementById('scrollToTopButton');\n\nwindow.addEventListener('scroll', () => {\n  if (window.pageYOffset > 200) {\n    // показуємо кнопку, якщо прокрутили на 200px\n    scrollToTopButton.classList.remove('hidden');\n  } else {\n    scrollToTopButton.classList.add('hidden');\n  }\n});\n\nscrollToTopButton.addEventListener('click', () => {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n});\n\n// function handleSubmit(event) {\n//   event.preventDefault();\n//   searchQuery = elements.input.value;\n//   page = 1;\n//   elements.gallery.innerHTML = '';\n\n//   fetchByQuery(searchQuery, page).then(({ totalHits }) => {\n//     if (totalHits === 0) {\n//       Notiflix.Notify.info(\n//         'Sorry, nothing was found according your serch query'\n//       );\n//       elements.loadMoreBtn.classList.add('load-more-hidden');\n//     } else {\n//       Notiflix.Notify.info(`Hooray! We found ${totalHits} images.`);\n//       fetchAndDisplay();\n//       if (totalHits > 40) {\n//         elements.loadMoreBtn.classList.replace('load-more-hidden', 'load-more');\n//       }\n//     }\n//   });\n// }\n\n// function handleLodaMore() {\n//   page += 1;\n//   fetchAndDisplay();\n// }\n\n// function fetchAndDisplay() {\n//   fetchByQuery(searchQuery, page)\n//     .then(({ hits, totalHits }) => {\n//       const markup = createMarkup(hits);\n//       elements.gallery.insertAdjacentHTML('beforeend', markup);\n//       new SimpleLightbox('.gallery a');\n\n//       if (page * 40 >= totalHits && totalHits > 0 && page > 1) {\n//         // elements.loadMoreBtn.classList.add('load-more-hidden');\n//         elements.loadMoreBtn.classList.replace('load-more', 'load-more-hidden');\n//         Notiflix.Notify.info(\n//           \"We're sorry, but you've reached the end of search results.\"\n//         );\n//       }\n//     })\n//     .catch(error => {\n//       Notiflix.Notify.failure('Something went wrong. Try reload the page');\n//       console.error('There was a problem with the fetch operation:', error);\n//     });\n// }\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<div class=\"photo-card\">\n  <a href=\"${largeImageURL}\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  </a>\n  <div class=\"info\">\n  <div class=\"info-item\">\n    <i class=\"fas fa-heart\"></i> <!-- іконка для Likes -->\n    <span>${likes}</span>\n  </div>\n  <div class=\"info-item\">\n    <i class=\"fas fa-eye\"></i> <!-- іконка для Views -->\n    <span>${views}</span>\n  </div>\n  <div class=\"info-item\">\n    <i class=\"fas fa-comments\"></i> <!-- іконка для Comments -->\n    <span>${comments}</span>\n  </div>\n  <div class=\"info-item\">\n    <i class=\"fas fa-download\"></i> <!-- іконка для Downloads -->\n    <span>${downloads}</span>\n  </div>\n</div>\n</div>`\n    )\n    .join('');\n}\n"],"names":["$bpxeT","parcelRequire","$59bb3250e981eb05$var$page","$59bb3250e981eb05$var$searchQuery","$59bb3250e981eb05$var$lightbox","$parcel$interopDefault","$5IjG7","$59bb3250e981eb05$var$elements","form","document","querySelector","input","gallery","submitBtn","loadMoreBtn","$59bb3250e981eb05$var$_handleSubmit","$2TvXO","mark","_callee","event","totalHits1","preventDefault","value","trim","innerHTML","classList","contains","replace","$6JpON","Notify","failure","$8H72y","fetchByQuery","_ctx","sent","totalHits","info","add","concat","$59bb3250e981eb05$var$fetchAndDisplay","console","error","t0","apply","this","arguments","$59bb3250e981eb05$var$_handleLodaMore","ref","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","$59bb3250e981eb05$var$_fetchAndDisplay","hits","totalHits2","markup","$59bb3250e981eb05$var$createMarkup","insertAdjacentHTML","refresh","addEventListener","$59bb3250e981eb05$var$scrollToTopButton","getElementById","arr","map","param","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","pageYOffset","remove","scrollTo"],"version":3,"file":"load-more.c08ca125.js.map"}