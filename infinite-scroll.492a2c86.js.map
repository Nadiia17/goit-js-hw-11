{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,0BAQA,IAAIC,EAAO,EAEPC,EAAc,GACdC,GAAY,EAEhB,MAAMC,EAAW,CACfC,KAAMC,SAASC,cAAc,gBAC7BC,MAAOF,SAASC,cAAc,6BAC9BE,QAASH,SAASC,cAAc,YAChCG,UAAWJ,SAASC,cAAc,0BAiDpC,SAASI,IACP,GAAIR,EAAW,OAEf,MAAMS,UAAEA,EAASC,aAAEA,EAAYC,aAAEA,GAAiBR,SAASS,gBACvDH,EAAYE,GAAgBD,EAAe,GApBjDG,iBACEb,GAAY,EACZF,GAAQ,QACFgB,IAEa,MAAXC,OAAQC,GAAeb,SAC5BC,cAAc,YACda,kBAAkBC,wBAErBC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EACLM,SAAU,WAEZtB,GAAY,C,CAQVuB,E,CAIJV,eAAeC,IACb,IACEd,GAAY,EACZ,MAAMwB,KAAEA,EAAMC,UAAAC,SAAoB,EAAA9B,EAAA+B,cAAa5B,EAAaD,GACtD8B,EAAsBJ,EAsB3BK,KACC,EAACC,aACCA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KACI,wCACCL,sBACGD,WAAsBE,8JAK1BC,4HAIAC,oIAIAC,qIAIAC,uCAKPC,KAAK,IAtDNpC,EAASK,QAAQgC,mBAAmB,YAAaV,GAEjD,IAAIW,EAAAC,GAAJ,CAAmB,cAER,GAAP1C,GAAa4B,GAAaA,EAAY,GAAK5B,EAAO,IACpDyC,EAAAE,GAASC,OAAOC,KACd,8DAEFxB,OAAOyB,oBAAoB,SAAUpC,IAGvCR,GAAY,C,CACZ,MAAO6C,GACPN,EAAAE,GAASC,OAAOI,QAAQ,6CACxBC,QAAQF,MAAM,gDAAiDA,GAC/D7C,GAAY,C,EA3EhBC,EAASC,KAAK8C,iBAAiB,UAG/BnC,eAA4BoC,GAC1BA,EAAMC,iBACNnD,EAAcE,EAASI,MAAM8C,MAC7BrD,EAAO,EACPG,EAASK,QAAQ8C,UAAY,GAE7B,IACE,MAAQ3B,UAAA4B,SAAoB,EAAAzD,EAAA+B,cAAa5B,EAAaD,GAEpC,IAAduD,EACFd,EAAAE,GAASC,OAAOC,KACd,wDAIFJ,EAAAE,GAASC,OAAOC,KAAK,oBAAoBU,mBACnCvC,I,CAKR,MAAO+B,GACPN,EAAAE,GAASC,OAAOI,QAAQ,6CACxBC,QAAQF,MAAM,gDAAiDA,E,KAzBnE1B,OAAO6B,iBAAiB,SAAUxC","sources":["src/js/infinite-scroll.js"],"sourcesContent":["import { fetchByQuery } from './pixabay-api';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport Notiflix from 'notiflix';\nimport 'notiflix/dist/notiflix-3.2.6.min.css';\n\nlet page = 1;\nlet totalHits = 0;\nlet searchQuery = '';\nlet isLoading = false;\n\nconst elements = {\n  form: document.querySelector('.search-form'),\n  input: document.querySelector('input[name=\"searchQuery\"]'),\n  gallery: document.querySelector('.gallery'),\n  submitBtn: document.querySelector('button[type=\"submit\"]'),\n};\n\nelements.form.addEventListener('submit', handleSubmit);\nwindow.addEventListener('scroll', handleScroll);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  searchQuery = elements.input.value;\n  page = 1;\n  elements.gallery.innerHTML = '';\n\n  try {\n    const { totalHits } = await fetchByQuery(searchQuery, page);\n\n    if (totalHits === 0) {\n      Notiflix.Notify.info(\n        'Sorry, nothing was found according your serch query'\n      );\n      //   elements.loadMoreBtn.classList.add('load-more-hidden');\n    } else {\n      Notiflix.Notify.info(`Hooray! We found ${totalHits} images.`);\n      await fetchAndDisplay();\n      //   if (totalHits > 40) {\n      //     elements.loadMoreBtn.classList.replace('load-more-hidden', 'load-more');\n      //   }\n    }\n  } catch (error) {\n    Notiflix.Notify.failure('Something went wrong. Try reload the page');\n    console.error('There was a problem with the fetch operation:', error);\n  }\n}\n\nasync function handleLodaMore() {\n  isLoading = true;\n  page += 1;\n  await fetchAndDisplay();\n  //  плавне прокручування\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n  isLoading = false;\n}\n\nfunction handleScroll() {\n  if (isLoading) return;\n\n  const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n  if (scrollTop + clientHeight >= scrollHeight - 5) {\n    handleLodaMore();\n  }\n}\n\nasync function fetchAndDisplay() {\n  try {\n    isLoading = true;\n    const { hits, totalHits } = await fetchByQuery(searchQuery, page);\n    const markup = createMarkup(hits);\n    elements.gallery.insertAdjacentHTML('beforeend', markup);\n\n    new SimpleLightbox('.gallery a');\n\n    if (page * 40 >= totalHits && totalHits > 0 && page > 1) {\n      Notiflix.Notify.info(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n      window.removeEventListener('scroll', handleScroll);\n    }\n\n    isLoading = false;\n  } catch (error) {\n    Notiflix.Notify.failure('Something went wrong. Try reload the page');\n    console.error('There was a problem with the fetch operation:', error);\n    isLoading = false;\n  }\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<div class=\"photo-card\">\n  <a href=\"${largeImageURL}\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  </a>\n  <div class=\"info\">\n  <div class=\"info-item\">\n    <i class=\"fas fa-heart\"></i> <!-- іконка для Likes -->\n    <span>${likes}</span>\n  </div>\n  <div class=\"info-item\">\n    <i class=\"fas fa-eye\"></i> <!-- іконка для Views -->\n    <span>${views}</span>\n  </div>\n  <div class=\"info-item\">\n    <i class=\"fas fa-comments\"></i> <!-- іконка для Comments -->\n    <span>${comments}</span>\n  </div>\n  <div class=\"info-item\">\n    <i class=\"fas fa-download\"></i> <!-- іконка для Downloads -->\n    <span>${downloads}</span>\n  </div>\n</div>\n</div>`\n    )\n    .join('');\n}\n"],"names":["$6fOXY","parcelRequire","$7f13665ecc617d63$var$page","$7f13665ecc617d63$var$searchQuery","$7f13665ecc617d63$var$isLoading","$7f13665ecc617d63$var$elements","form","document","querySelector","input","gallery","submitBtn","$7f13665ecc617d63$var$handleScroll","scrollTop","scrollHeight","clientHeight","documentElement","async","$7f13665ecc617d63$var$fetchAndDisplay","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$7f13665ecc617d63$var$handleLodaMore","hits","totalHits","totalHits2","fetchByQuery","markup","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","$parcel$interopDefault","$fZKcF","$7Y9D8","Notify","info","removeEventListener","error","failure","console","addEventListener","event","preventDefault","value","innerHTML","totalHits1"],"version":3,"file":"infinite-scroll.492a2c86.js.map"}